{"remainingRequest":"/Users/zhangjun/Documents/workspace/test-space/paolu/GrooveUI/groove-zhiwu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangjun/Documents/workspace/test-space/paolu/GrooveUI/groove-zhiwu/src/components/game.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangjun/Documents/workspace/test-space/paolu/GrooveUI/groove-zhiwu/src/components/game.vue","mtime":1632307141713},{"path":"/Users/zhangjun/Documents/workspace/test-space/paolu/GrooveUI/groove-zhiwu/node_modules/cache-loader/dist/cjs.js","mtime":1589375722521},{"path":"/Users/zhangjun/Documents/workspace/test-space/paolu/GrooveUI/groove-zhiwu/node_modules/babel-loader/lib/index.js","mtime":1607483830637},{"path":"/Users/zhangjun/Documents/workspace/test-space/paolu/GrooveUI/groove-zhiwu/node_modules/cache-loader/dist/cjs.js","mtime":1589375722521},{"path":"/Users/zhangjun/Documents/workspace/test-space/paolu/GrooveUI/groove-zhiwu/node_modules/vue-loader/lib/index.js","mtime":1628175232390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBHYW1lIGZyb20gJ0AvY2xhc3MvR2FtZScKLy8gaW1wb3J0IEJhc2UgZnJvbSAnQC9jbGFzcy92ZWdldGFibGUvYmFzZScKaW1wb3J0IFN1bmZsb3dlciBmcm9tICdAL2NsYXNzL3ZlZ2V0YWJsZS9zdW5mbG93ZXInCmltcG9ydCBQZWFzaG9vdGVyIGZyb20gJ0AvY2xhc3MvdmVnZXRhYmxlL1BlYXNob290ZXInCmltcG9ydCBQb3RhdG8gZnJvbSAnQC9jbGFzcy92ZWdldGFibGUvUG90YXRvJwpjb25zdCBnZXRJbnN0YW5jZSA9IChGbiwgcG9zaXRpb24pID0+IHsKICBjb25zb2xlLmxvZygnaW5zdGFuY2UnKQogIHJldHVybiBuZXcgRm4ocG9zaXRpb24pCn0KY29uc3QgdmVnZXRhYmxlTGlzdCA9IFsKICB7IG5hbWU6ICflkJHml6XokbUnLCBjb250ZW50OiBTdW5mbG93ZXIsIGNvc3Q6IFN1bmZsb3dlci5jb3N0IH0sCiAgeyBuYW1lOiAn6LGM6LGG5bCE5omLJywgY29udGVudDogUGVhc2hvb3RlciwgY29zdDogUGVhc2hvb3Rlci5jb3N0IH0sCiAgeyBuYW1lOiAn5Zyf6LGGJywgY29udGVudDogUG90YXRvLCBjb3N0OiAxMDAgfQogIC8vIHsgbmFtZTogJ+aoseahg+eCuOW8uScsIGNvbnRlbnQ6IFN1bmZsb3dlciwgY29zdDogMTUwIH0sCiAgLy8geyBuYW1lOiAn5YCt55Oc5ouz5omLJywgY29udGVudDogU3VuZmxvd2VyLCBjb3N0OiA1MCB9Cl0KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdHYW1lJywKICBjb21wb25lbnRzOiB7CiAgICBjZWxsOiAoKSA9PiBpbXBvcnQoJy4vY2VsbC52dWUnKQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZlZ2V0YWJsZUxpc3QsCiAgICAgIHZlZ2V0YWJsZVNlbGVjdDogJycsCiAgICAgIGdhbWU6IG5ldyBHYW1lKCksCiAgICAgIHN0YXJ0OiBmYWxzZSwKICAgICAgdG9hc3Q6IGZhbHNlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdmF1bHRWYWx1ZTogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuY291bnQKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIGNvbnN0IHN0YWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKQogICAgICB0aGlzLmdhbWUuc2V0U3RhZ2Uoc3RhZ2UpCiAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgY29zdFZhbHVlICh2YWx1ZSkgewogICAgICB0aGlzLnZhdWx0VmFsdWUgLT0gdmFsdWUKICAgIH0sCiAgICBjbGlja1Jvb20oeCwgeSkgewogICAgICBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpKQogICAgICBpZiAodGhpcy5nYW1lLnN0YWdlLnJvb21beF1beV0gIT09IG51bGwgfHwgdGhpcy52ZWdldGFibGVTZWxlY3QgPT09ICcnKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgbGV0IHYgPSBnZXRJbnN0YW5jZSh0aGlzLnZlZ2V0YWJsZVNlbGVjdC5jb250ZW50LCB7IHgsIHkgfSkKICAgICAgdGhpcy5nYW1lLnNldFZlZ2V0YWJsZSh4LCB5LCB2KQogICAgICB0aGlzLnZlZ2V0YWJsZVNlbGVjdCA9ICcnCiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgdGhpcy5zdGFydEdhbWUoKQogICAgfSwKICAgIHN0YXJ0R2FtZSgpIHsKICAgICAgaWYgKCF0aGlzLnN0YXJ0KSB7CiAgICAgICAgdGhpcy5nYW1lLnN0YXJ0R2FtZSgpCiAgICAgICAgdGhpcy5zdGFydCA9IHRydWUKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMudG9hc3QgPSB0cnVlCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy50b2FzdCA9IGZhbHNlCiAgICAgICAgICB9LCAxMDAwKQogICAgICAgIH0sIDMwMDApCiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3QodikgewogICAgICBpZiAodGhpcy52YXVsdFZhbHVlIDwgdi5jb3N0KSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgdGhpcy52ZWdldGFibGVTZWxlY3QgPSB2CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["game.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"game.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"game\" id=\"game\">\n    <div class=\"toast\" v-show=\"toast\">\n      <img src=\"../assets/toast.gif\" alt=\"\">\n    </div>\n    <div class=\"vegetable-list\">\n      <div class=\"vegetable-list__item\" :overcost=\"vegetable.cost>vaultValue\" :active=\"vegetableSelect === vegetable\" v-for=\"vegetable in vegetableList\" :key=\"vegetable.name\" @mousedown=\"select(vegetable)\">\n        {{ vegetable.name }}\n      </div>\n    </div>\n    <div class=\"vault\">\n      {{vaultValue}}\n    </div>\n    <div class=\"table\" id=\"stage\">\n      <div class=\"row \" v-for=\"(row,x) in game.stage.room\" :key=\"x\">\n        <div class=\"cell\" v-for=\"(cell,y) in row\" :key=\"y\" @click=\"clickRoom(x,y)\">\n          <cell :content=\"cell\">\n          </cell>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Game from '@/class/Game'\n// import Base from '@/class/vegetable/base'\nimport Sunflower from '@/class/vegetable/sunflower'\nimport Peashooter from '@/class/vegetable/Peashooter'\nimport Potato from '@/class/vegetable/Potato'\nconst getInstance = (Fn, position) => {\n  console.log('instance')\n  return new Fn(position)\n}\nconst vegetableList = [\n  { name: '向日葵', content: Sunflower, cost: Sunflower.cost },\n  { name: '豌豆射手', content: Peashooter, cost: Peashooter.cost },\n  { name: '土豆', content: Potato, cost: 100 }\n  // { name: '樱桃炸弹', content: Sunflower, cost: 150 },\n  // { name: '倭瓜拳手', content: Sunflower, cost: 50 }\n]\nexport default {\n  name: 'Game',\n  components: {\n    cell: () => import('./cell.vue')\n  },\n  data() {\n    return {\n      vegetableList,\n      vegetableSelect: '',\n      game: new Game(),\n      start: false,\n      toast: false\n    }\n  },\n  computed: {\n    vaultValue: function () {\n      return this.$store.state.count\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      const stage = document.getElementById('game')\n      this.game.setStage(stage)\n    })\n  },\n  methods: {\n    costValue (value) {\n      this.vaultValue -= value\n    },\n    clickRoom(x, y) {\n      console.log(document.getElementById('game'))\n      if (this.game.stage.room[x][y] !== null || this.vegetableSelect === '') {\n        return\n      }\n      let v = getInstance(this.vegetableSelect.content, { x, y })\n      this.game.setVegetable(x, y, v)\n      this.vegetableSelect = ''\n      this.$forceUpdate()\n      this.startGame()\n    },\n    startGame() {\n      if (!this.start) {\n        this.game.startGame()\n        this.start = true\n        setTimeout(() => {\n          this.toast = true\n          setTimeout(() => {\n            this.toast = false\n          }, 1000)\n        }, 3000)\n      }\n    },\n    select(v) {\n      if (this.vaultValue < v.cost) {\n        return\n      }\n      this.vegetableSelect = v\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.game{\n  box-sizing: border-box;\n  height: 100%;\n  width: 100%;\n  position: relative;\n  user-select: none;\n  overflow: hidden;\n  .toast{\n    z-index: 10;\n    position: absolute;\n    width: 200px;\n    top:50%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n  }\n  .vault{\n    position: absolute;\n    min-width: 50px;\n    text-align: center;\n    border: 2px solid #895c24;\n    left:170px;\n    top:50px;\n    padding: 4px 12px ;\n    font-size: 16px;\n    color: white;\n    background: #cf9236;\n    border-radius: 5px;\n  }\n  .vegetable-list{\n    width: 360px;\n    background: #cf9236;\n    position: absolute;\n    left: 250px;\n    padding:10px 4px ;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    border: 2px solid #895c24;\n    border-radius: 5px;\n    .vegetable-list__item{\n      background: white;\n      padding: 4px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 60px;\n      width: 40px;\n      margin-left: 10px;\n      border-radius: 5px;\n      border: 2px solid rgba(0, 0, 0, 0);\n\n      &:first-child{\n        margin-left: 0;\n      }\n      &[active=true]{\n        border: 2px solid red;\n      }\n      &[overcost=true]{\n        background: #7f7f7f;\n        cursor: not-allowed;\n      }\n    }\n  }\n  .table{\n    position: absolute;\n    left: 255px;\n    top:96px;\n    z-index: 2;\n  }\n}\n\n.row{\n  height: 46px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n}\n.cell{\n  &:hover{\n    background: rgba(245, 245, 220, 0.16);\n  }\n  display: inline-block;\n  height: 100%;\n  width: 39px;\n}\n</style>\n"]}]}